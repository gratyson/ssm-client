<div class="secret-password">
    <mat-form-field class="secret-password-field">
        <mat-label>{{ fieldName }}</mat-label>
        <div class="password-input">
            <input #passwordInput 
                   [type]="viewPassword ? 'text' : 'password'"
                   matInput [ngModel]="value" 
                   [ngModel]="value" 
                   (ngModelChange)="onValueChange($event)" 
                   [disabled]="!isSecretUnlocked" 
                   [maxlength]="maxlength" />
            <button mat-icon-button (click)="togglePasswordVisibility()" [disabled]="!isSecretUnlocked || !value">
                <mat-icon matSuffix>{{ viewPasswordIcon }}</mat-icon>
            </button>
        </div>
    </mat-form-field>
    <button mat-icon-button 
            class="password-copy-button"  
            [cdkCopyToClipboard]="value" 
            (click)="copyPassword()" 
            [disabled]="!isSecretUnlocked || !value">
        <mat-icon>file_copy</mat-icon>
    </button>
</div>